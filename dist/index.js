(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(18),a=s(4);e.COINS={startSum:500},e.PERSON={width:70,height:110,speed:400,velocityX:300,velocityY:900,tweenSettings:{run:{frames:[8,9,10,11],frameRate:10},jump:{frames:[4],frameRate:1},stand:{frames:[0],frameRate:1}}},e.RANGE=[0,1e3],e.backgroundColor="rgba(85, 154, 198, 30)",e.ground={width:4300,height:48},e.ENEMIES={count:10},function(t){t.fsb="fsb",t.official="official",t.gangster="gangster",t.prosecutor="prosecutor",t.policeman="policeman"}(e.ENEMY_TYPES||(e.ENEMY_TYPES={})),e.DEACTIVATE_TIME_FOR_COLLIDE_PERSON_POLICEMAN=2e3,function(t){t.Game="Game",t.Finish="Finish",t.PreBoot="PreBoot",t.Boot="Boot",t.Preload="Preload",t.Help="Help",t.Menu="Menu"}(e.STATES||(e.STATES={})),e.buildingIdsType=i.strEnumHelper(["school","innovation","ministerstvo","zakupki_and_tenderi"]),e.buildingIdsKeys=Object.keys(e.buildingIdsType).map(t=>e.buildingIdsType[t]).join(","),e.typesBuiding={school:"big_school.png",innovation:"innovation_house.png",ministerstvo:"ministerstvo.png",zakupki_and_tenderi:"zakupki_and_tenderi.png"},e.orderBuidings=["ministerstvo","innovation","zakupki_and_tenderi","school"],e.BUIDING_COORDS={ministerstvo:{position:{x:100},scale:{x:0,y:1}},innovation:{position:{x:1100},scale:{x:0,y:1}},zakupki_and_tenderi:{position:{x:2e3},scale:{x:0,y:1}},school:{position:{x:3e3},scale:{x:0,y:1}}},e.MOOD={step:10},function(t){t.person="person",t.tilemap="tilemap",t.tiles="tiles",t.coin="coin",t.enemy="enemy",t.ground="ground",t.cactus="cactus",t.clouds="clouds",t.policeman="policeman",t.hands="hands",t.clerk="clerk",t.passer="passer",t.donation="donation",t.mood="mood",t.loading="loading",t.background="background"}(e.LayersIds||(e.LayersIds={})),function(t){t.vasya="obstacles_vasya",t.texture="obstacles_texture"}(e.obstaclesKeys||(e.obstaclesKeys={}));const o=[.1,.11,.101,.115];e.passersConstants={"usual-1":{setTo:[.11,o[a.getRandomValueFromArray(o)]],stand:{frames:[8],frameRate:1},move:{frames:[0,1,2,3,4,5,6].reverse(),frameRate:8}},"usual-2":{setTo:[.1,.1],stand:{frames:[1],frameRate:1},move:{frames:[0,1,2,3,4,5,6,7].reverse(),frameRate:8}},sentsov:{setTo:[.1,.1],stand:{frames:[1],frameRate:1},move:{frames:[0,1,2,3,4,5,6,7].reverse(),frameRate:8}},pupil:{setTo:[.09,.085],stand:{frames:[2],frameRate:1},move:{frames:[4,5,6,7,0,1,2,3].reverse(),frameRate:8}}},e.passersTypes=i.strEnumHelper(Object.keys(e.passersConstants)),e.passers=[{key:"usual-1",count:5},{key:"usual-2",count:5},{key:"sentsov",count:5},{key:"pupil",count:10}],e.FAIL_MSG={mood:"You are not gonna be in a good mood at this moment! Will try tomorrow!)",money:"You are out of money!"},e.HANDS={width:60,height:80},e.HANDS_COORDS=[[1230,130],[2161,200],[735,200]]},function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const o=s(76),n=i(s(46)),r=i(s(48)),h=i(s(49)),d=i(s(50)),c=i(s(51)),l=i(s(52)),u=i(s(53)),p=i(s(54)),g=a(s(2)),m=o.combineReducers({policeman:n.default,enemy:r.default,mood:h.default,score:d.default,official:c.default,passers:l.default,events:u.default,statusGame:p.default}),f=o.createStore((t,e)=>(e.type===g.START_GAME&&(t=void 0),m(t,e)),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());e.default=f},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PERSON_POLICEMAN_COLLIDE="PERSON_POLICEMAN_COLLIDE",e.PERSON_POLICEMAN_REMOVE="PERSON_POLICEMAN_REMOVE",e.ENEMY_COLLIDE="ENEMY_COLLIDE",e.CHANGE_MOOD="CHANGE_MOOD",e.REDUCE_MOOD="REDUCE_MOOD",e.UPDATE_SCORE="UPDATE_SCORE",e.UPDATE_MONEY="UPDATE_MONEY",e.ADD_CACTUS="ADD_CACTUS",e.THROW_CACTUS="THROW_CACTUS",e.COLLIDE_POLICEMAN_CACTUS="COLLIDE_POLICEMAN_CACTUS",e.GAME_OVER="GAME_OVER",e.COLLIDE_OFFICIAL="COLLIDE_OFFICIAL",e.COLLIDE_PASSER="COLLIDE_PASSER",e.ADD_ENEMY="ADD_ENEMY",e.RENDER_CROWD="RENDER_CROWD",e.HAPPY_END="HAPPY_END",e.START_GAME="START_GAME"},function(t,e,s){"use strict";var i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s(2));e.collidePersonWithPoliceman=function(t){return{type:a.PERSON_POLICEMAN_COLLIDE,id:t.id}},e.removePolicemanFromCollided=function(t){return{type:a.PERSON_POLICEMAN_REMOVE,id:t.id}},e.addCactus=function(){return{type:a.ADD_CACTUS}},e.addEnemy=function(t){return{type:a.ADD_ENEMY,enemyType:t.type,playerId:t.playerId}},e.throwCactus=function(){return{type:a.THROW_CACTUS}},e.changeMoney=function(t){return{type:a.UPDATE_MONEY,amount:t}},e.renderCrowd=function(){return{type:a.RENDER_CROWD}},e.reduceMood=function(t){return{type:a.REDUCE_MOOD,cause:t.cause}},e.changeMood=function(t){return{type:a.CHANGE_MOOD,incr:t.incr}},e.gameOver=function(t){return{type:a.GAME_OVER,msg:t.msg}},e.gameEnd=function(){return{type:a.HAPPY_END}},e.collideOfficial=function(t){return{type:a.COLLIDE_OFFICIAL,id:t}},e.collidePasser=function(t){return{type:a.COLLIDE_PASSER,id:t}},e.startGame=function(){return{type:a.START_GAME}}},function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});const s="sdkfjhskdf34234623V4sdfjgh234234JG3eu247y237RKWRG3U2YTGKUW7R234TGqwmjhegmqjrgea,jthlei485y3i4yr",i=()=>s[Math.round(Math.random()*(s.length-1))];function a(t=8){let e="";for(let s=0;s<t;s++)e+=i();return e}e.getString=a,e.generatorRandomString=function(){let t=[];return{getId(){let e=a();if(!(t.indexOf(e)>=0))return t.push(e),e;this.getId()}}},e.generatorId=(()=>{let t=0;return{get:e=>e+"-"+ ++t}}),e.getRandom=(()=>Boolean(Math.round(Math.random()))),e.deepFlatten=function t(e){return[].concat(...e.map(e=>Array.isArray(e)?t(e):e))},e.getRandomValueFromArray=(t=>Math.floor(Math.random()*t.length)),e.sampleSize=(([...t],e=1)=>{let s=t.length;for(;s;){const e=Math.floor(Math.random()*s--);[t[s],t[e]]=[t[e],t[s]]}return t.slice(0,e)}),e.isDevelopment="true"===t.env.DEVELOPMENT,e.utils={centerGameObjects:function(t){t.forEach(function(t){t.anchor.setTo(.5)})}}}).call(this,s(9))},,,function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(4).generatorId(),{get:a}=i;e.default=class{constructor({game:t,x:e,y:s,key:i}){this.sprite=t.add.sprite(e,s,i),this.playerId=a(i),t.add.existing(this.sprite),t.physics.arcade.enable(this.sprite)}}},,,function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.PubSub=(()=>{const t=[];return{subscribe(e){t.push(e)},publish(...e){t.forEach(t=>{t.call(this,...Array.prototype.slice.apply(e))})}}})()},function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=s(0),o=s(4),n=s(12),r=i(s(1)),h=s(3);o.generatorRandomString();e.default=class extends n.Passer{constructor(t){super(t.game,t.coord,t.speed,t.key,t.spriteOptions,t.time_threshold),this.isTouchedByCactus=!1,this.isCollidedWithPerson=!1,this.game=t.game,this.type=t.type,this.time_disabled=t.time_disabled,this.addEnemy()}addEnemy(){r.default.dispatch(h.addEnemy({playerId:this.playerId,type:this.type}))}update(){if(this.isTouchedByCactus)return this.sprite.animations.stop("move",!0),!0;super.update()}onCactusCollision(){switch(this.type){case"policeman":case"official":this.deactivateForTheTime()}}deactivateForTheTime(t=300){this.isTouchedByCactus=!0,this.sprite.body.moves=!1,this.tween=this.game.add.tween(this.sprite).to({alpha:0},t,Phaser.Easing.Linear.None,!0,0,100,!1),this.timer=this.game.time.events.loop(this.time_disabled,this.finishCollision,this)}finishCollision(){this.game.time.events.remove(this.timer),this.isTouchedByCactus=!1,this.sprite.alpha=1,this.tween.stop()}kill(){this.sprite.kill()}collideWithPerson(t,e){if(!this.isTouchedByCactus&&!this.isCollidedWithPerson){this.isCollidedWithPerson=!0,t&&t();const s=this.game.time.events.loop(a.DEACTIVATE_TIME_FOR_COLLIDE_PERSON_POLICEMAN,()=>{this.isCollidedWithPerson=!1,this.game.time.events.remove(s),e&&e()},this)}}}},function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s(1)),o=i(s(62)),n=s(0);s(13);const r=s(3),h=s(4),d={min:15,max:30},c=2e3;class l extends o.default{constructor(t,e,s,i,a,o){super({game:t,x:t.rnd.between(100,e.x),y:t.world.height-n.ground.height,key:i,speed:s,time_threshold:o||c,velocity:{min:5,max:8}}),this.game=t,this.key=i,this.sprite.scale.setTo(a.setTo[0],a.setTo[1]),this.sprite.anchor.set(.5,1),this.sprite.animations.add("stand",a.stand.frames,a.stand.frameRate,!0),this.animationRun=this.sprite.animations.add("move",a.move.frames,a.move.frameRate,!0),this.sprite.animations.play("stand"),this.game.debug.body(this.sprite)}render(){}}e.Passer=l,e.renderPassers=(t=>{const e=n.passers.map(e=>{const s=[];if(e.count>0&&"pupil"!==e.key)for(let i=0;i<e.count;i++)s.push(new l(t,{x:t.rnd.between(100,t.world.width-300)},d,`passer-${e.key}`,n.passersConstants[e.key]));return s}),s=h.deepFlatten(e);return{sprites:s.map(t=>t.sprite),instances:s,update:()=>s.forEach(t=>t.update()),collisionWithPerson:t=>{const e=s.find(e=>e.sprite===t),i=a.default.getState();if(i.passers.collided.indexOf(e.key)<0){a.default.dispatch(r.collidePasser(e.key)),a.default.dispatch(r.changeMoney(10)),i.passers.collided.length%5==0&&a.default.dispatch(r.changeMood({incr:10}))}},collideWithObstacles:t=>{s.find(e=>e.sprite===t).collideWithObstacles()}}});e.CrowdHandler=class{constructor(t){this.arr=[],this.isRendered=!1,this.sprites=[],this.render=(()=>{const t=a.default.getState();if(!t.events.renderCrowd||t.events.renderCrowd===this.isRendered)return;this.isRendered=t.events.renderCrowd;const e=n.passers.find(t=>"pupil"===t.key);if(this.arr=[],e.count>0){for(let t=0;t<e.count;t++)this.arr.push(new l(this.game,{x:this.game.rnd.between(this.game.world.width-100,this.game.world.width)},d,`passer-${e.key}`,n.passersConstants[e.key]));this.sprites=this.arr.map(t=>t.sprite)}}),this.game=t,a.default.subscribe(this.render)}collisionWithPerson(t){}update(){this.arr.forEach(t=>{t.update()})}}},function(t,e,s){t.exports=s.p+"assets/clerk.png"},,,function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s(17)),o=i(s(43)),n=i(s(68)),r=s(71),h=s(72),d=i(s(73));window.onload=(()=>{const[t,e]=(t=>{const e=document.querySelector(t);return r.rgResizeBody(e)})(".js-game-container");this.game=new Phaser.Game({width:t,height:e,parent:document.querySelector(".js-game-container"),antialias:!0,renderer:Phaser.CANVAS}),this.game.state.add("PreBoot",a.default),this.game.state.add("Game",o.default),this.game.state.add("Finish",n.default),this.game.state.add("Menu",h.MenuWrapper),this.game.state.add("Help",d.default),this.game.state.start("PreBoot")}),window.onresize=(()=>{this.game})},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0);s(19),s(20),s(21),s(22),s(23),s(24),s(25),s(26),s(27),s(28),s(29),s(30),s(31),s(32),s(33),s(34),s(35),s(36),s(37),s(38),s(39),s(40),s(41),s(42);const a=s(4);e.default=class extends Phaser.State{constructor(){super(...arguments),this.assetsPath="./assets/"}preload(){this.load.image("loading",`${this.assetsPath}loading.png`),this.load.image("cactus",`${this.assetsPath}cactuses.png`)}create(){this.state.add("Boot",o),this.state.start("Boot")}};class o extends Phaser.State{constructor(){super(...arguments),this.assetsPath="./assets/"}init(){}preload(){this.game.stage.backgroundColor="#000",this.loadingBar=this.add.sprite(this.world.centerX,100,"loading"),this.logo=this.add.sprite(this.world.centerX,200,"cactus"),this.status=this.add.text(this.world.centerX,380,"Loading...",{fill:"white"}),this.loadingBar.anchor.set(.5,0),this.logo.scale.setTo(1.2),a.utils.centerGameObjects([this.logo,this.status]),this.load.setPreloadSprite(this.loadingBar,0),this.game.load.atlasJSONHash("buildings","./assets/buildings.png","./assets/buildings.json"),this.load.spritesheet("person",`${this.assetsPath}player.png`,128,128,12),this.load.image("hands",`${this.assetsPath}raised_hands.png`),this.load.tilemap("tilemap",`${this.assetsPath}test_level2.json`,null,Phaser.Tilemap.TILED_JSON),this.load.image("tiles",`${this.assetsPath}obstacles.png`),this.load.image("coin",`${this.assetsPath}one-coin.png`),this.load.image("tiles",`${this.assetsPath}super_mario.png`),this.load.image("ground",`${this.assetsPath}ground.png`),this.load.image("clouds",`${this.assetsPath}clouds.png`),this.load.spritesheet("policeman",`${this.assetsPath}policeman.png`,274,756.5,8),this.load.spritesheet("clerk",`${this.assetsPath}clerk.png`,721.5,1105,8),this.load.image("donation",`${this.assetsPath}donation.png`),this.load.spritesheet(`passer-${i.passersTypes["usual-1"]}`,`${this.assetsPath}kindpasser_green.png`,329,894,9),this.load.spritesheet(`passer-${i.passersTypes["usual-2"]}`,`${this.assetsPath}kindpasser.png`,329.25,896.5,8),this.load.spritesheet(`passer-${i.passersTypes.sentsov}`,`${this.assetsPath}sentsov.png`,451.5,894,8),this.load.spritesheet(`passer-${i.passersTypes.pupil}`,`${this.assetsPath}pupil.png`,445.25,986.5,8),this.load.image(i.obstaclesKeys.texture,`${this.assetsPath}grey_texture.png`),this.load.image(i.obstaclesKeys.vasya,`${this.assetsPath}vasya.png`)}create(){this.status.setText("Ready!"),this.state.start("Game")}render(){}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.strEnumHelper=function(t){return t.reduce((t,e)=>(t[e]=e,t),Object.create(null))}},function(t,e,s){t.exports=s.p+"assets/loading.png"},function(t,e,s){t.exports=s.p+"assets/big_school.png"},function(t,e,s){t.exports=s.p+"assets/innovation_house.png"},function(t,e,s){t.exports=s.p+"assets/ministerstvo.png"},function(t,e,s){t.exports=s.p+"assets/zakupki_and_tenderi.png"},function(t,e,s){t.exports=s.p+"assets/buildings.png"},function(t,e,s){t.exports=s.p+"assets/buildings.json"},function(t,e,s){t.exports=s.p+"assets/player.png"},function(t,e,s){t.exports=s.p+"assets/raised_hands.png"},function(t,e,s){t.exports=s.p+"assets/one-coin.png"},function(t,e,s){t.exports=s.p+"assets/ground.png"},function(t,e,s){t.exports=s.p+"assets/cactuses.png"},function(t,e,s){t.exports=s.p+"assets/clouds.png"},function(t,e,s){t.exports=s.p+"assets/policeman.png"},function(t,e,s){t.exports=s.p+"assets/kindpasser.png"},function(t,e,s){t.exports=s.p+"assets/kindpasser_green.png"},function(t,e,s){t.exports=s.p+"assets/pupil.png"},function(t,e,s){t.exports=s.p+"assets/sentsov.png"},function(t,e,s){t.exports=s.p+"assets/super_mario.png"},function(t,e,s){t.exports=s.p+"assets/donation.png"},function(t,e,s){t.exports=s.p+"assets/obstacles.png"},function(t,e,s){t.exports=s.p+"assets/grey_texture.png"},function(t,e,s){t.exports=s.p+"assets/vasya.png"},function(t,e,s){t.exports=s.p+"assets/test_level2.json"},function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s(44)),o=i(s(1)),n=i(s(55)),r=i(s(57)),h=s(61),d=s(63),c=s(64),l=s(66),u=s(0),p=s(67),g=s(12),m=s(4),f=s(3);e.default=class extends a.default.State{constructor(){super(...arguments),this.listBuidingsSprite=[],this.assetsPath="./assets/"}init(){o.default.dispatch(f.startGame())}preload(){}createClouds(){this.cloudsSprite=this.game.add.tileSprite(0,0,3e3*this.game.width,this.game.height-200,"clouds",0),this.cloudsSprite.scale.set(1.1,1),this.cloudsSprite.smoothed=!0,this.cloudsSprite.autoScroll(-5,0)}createGround(){let t=this.game.make.graphics();t.beginFill(7759399,1),t.drawRect(0,0,u.ground.width,u.ground.height),t.endFill(),t.boundsPadding=0,this.ground=this.game.add.sprite(0,this.game.world.height-u.ground.height),this.ground.addChild(t),this.ground.width=u.ground.width,this.ground.height=u.ground.height,this.ground.anchor.set(0,0),this.physics.arcade.enable(this.ground),this.ground.body.immovable=!0}createBuidings(){for(let t of u.orderBuidings)if(void 0!==u.BUIDING_COORDS[t]){let e=u.BUIDING_COORDS[t],s=this.game.add.sprite(e.position.x,this.game.world.height-u.ground.height,"buildings",`${u.typesBuiding[t]}`);s.anchor.setTo(e.scale.x,e.scale.y),this.listBuidingsSprite.push(s)}}createGroundFromTiles(){}_createObstacles(){}createObstacles(){(new a.default.Polygon).setTo([new a.default.Point(200,100),new a.default.Point(350,100),new a.default.Point(375,200),new a.default.Point(150,200)]),this.obstacles=l.render.call({game:this.game})}createLadder(){this.map=this.add.tilemap("tilemap"),this.map.heightInPixels=this.game.world.height,this.map.addTilesetImage("obstacles","tiles"),this.ladder=this.map.createLayer("ladder"),this.physics.arcade.enable(this.ladder),this.map.setCollision([58,59],!0,this.ladder),this.ladder.anchor.set(0,0),this.ladder.scrollFactorY=0,this.ladder.scrollFactorX=0,this.ladder.scrollY=0,this.ladder.fixedToCamera=!1}createFinalPoints(){const t=[{y:this.game.world.height-u.ground.height-400,x:this.game.world.width-100}];this.donation=this.game.add.physicsGroup(a.default.Physics.ARCADE),t.forEach(t=>{const e=this.game.add.sprite(t.x,t.y,"donation");e.width=50,e.height=50,this.donation.add(e)})}create(){this.physics.startSystem(a.default.Physics.ARCADE),this.stage.backgroundColor=u.backgroundColor,this.game.world.resize(u.ground.width,this.game.height),this.createLadder(),this.createClouds(),this.createGround(),this.createBuidings(),this.createObstacles(),this.createFinalPoints(),this.handsHandler=new c.HandsHandler(this.game),this.person=new n.default({game:this.game}),this.score=new r.default({game:this.game}),this.officials=p.renderOfficials(this.game),this.passers=g.renderPassers(this.game),this.cactusHandler=d.CactusHandler(this.game),this.policemanWatcher=h.PolicemanManager(this.game),this.crowd=new g.CrowdHandler(this.game)}update(){this.physics.arcade.collide(this.person.sprite,this.obstacles,null,null,this),this.physics.arcade.collide(this.policemanWatcher.getAllSprites(),this.obstacles,this.policemanWatcher.collideWithObstacles,null,this.policemanWatcher),this.physics.arcade.collide(this.officials.sprites,this.obstacles,this.officials.collideWithObstacles,null,this),this.physics.arcade.collide(this.passers.sprites,this.obstacles,this.passers.collideWithObstacles,null,this),this.physics.arcade.overlap(this.person.sprite,this.donation,this.person.collideFinalPoints,null,this),this.physics.arcade.overlap(this.person.sprite,this.policemanWatcher.getAllActivePoliceman(),(t,e)=>{m.isDevelopment||(this.policemanWatcher.collidePerson(e),this.person.collideWithEnemy({type:"policeman"}))},null,this),this.physics.arcade.collide(this.ground,this.policemanWatcher.getAllSprites()),this.physics.arcade.collide(this.person.sprite,this.cactusHandler.aliveCactuses(),(t,e)=>{this.cactusHandler.collidePersonWithCactus(e)},null,this),this.physics.arcade.collide(this.policemanWatcher.getAllSprites(),this.cactusHandler.thrownCactuses,(t,e)=>{this.policemanWatcher.collideCactus(t),this.cactusHandler.collideEnemyWithCactus(e)},null,this),this.physics.arcade.collide(this.officials.sprites,this.cactusHandler.thrownCactuses,(t,e)=>{this.officials.collideCactus(t),this.cactusHandler.collideEnemyWithCactus(e)},null,this),this.physics.arcade.collide(this.cactusHandler.thrownCactuses,this.obstacles,this.cactusHandler.collideObstaclesWithCactus,null,this.cactusHandler),this.physics.arcade.collide(this.cactusHandler.thrownCactuses,this.ground,this.cactusHandler.collideObstaclesWithCactus,null,this.cactusHandler),this.physics.arcade.collide(this.person.sprite,this.crowd,this.meetCrowd,null,this),this.physics.arcade.collide(this.person.sprite,this.ground,()=>{this.person.endJumping()},null,this),this.physics.arcade.collide(this.ground,this.passers.sprites),this.physics.arcade.collide(this.ground,this.officials.sprites),this.physics.arcade.collide(this.ground,this.crowd.sprites),this.physics.arcade.overlap(this.person.sprite,this.handsHandler.getHandsSprite(),(t,e)=>{this.handsHandler.collidePerson(e)}),this.physics.arcade.overlap(this.person.sprite,this.officials.sprites,this.collideWithOfficials,null,this),this.physics.arcade.overlap(this.person.sprite,this.passers.sprites,this.collideWithPassers,null,this),this.person.update(),this.handsHandler.update(this.person.sprite.centerX),this.passers.update(),this.officials.update(),this.cactusHandler.update(),this.policemanWatcher.update(),this.crowd.update()}collideWithOfficials(t,e){this.officials.collisionWithPerson(e)}collideWithPassers(t,e){this.passers.collisionWithPerson(e)}render(){this.obstacles.forEach(t=>{}),this.person.render()}meetCrowd(t,e){this.game.state.start("Finish",!0,!1)}}},,,function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const o=i(s(47)),n=a(s(2)),r={activeIds:{}};e.default=function(t=r,e){switch(e.type){case n.PERSON_POLICEMAN_COLLIDE:return Object.assign({},t,{activeIds:Object.assign({},t.activeIds,{[e.id]:!0})});case n.PERSON_POLICEMAN_REMOVE:return o.default(t,[e.id]);case n.COLLIDE_POLICEMAN_CACTUS:return{collide_id_with_cactus:e.id};default:return t}}},,function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(2),a={enemies:{}};e.default=function(t=a,e){switch(e.type){case i.ADD_ENEMY:const s=Object.assign({},t.enemies);return void 0===s[e.enemyType]&&(s[e.enemyType]=[]),s[e.enemyType].push(e.playerId),Object.assign({},t,{enemies:s});default:return t}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(2),a={total:100};e.default=function(t=a,e){switch(e.type){case i.CHANGE_MOOD:let s=t.total+e.incr<0?0:t.total+e.incr;return Object.assign({},t,{total:s});case i.REDUCE_MOOD:return Object.assign({},t,{cause:e.cause});default:return t}}},function(t,e,s){"use strict";var i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s(2)),o={cactuses:0,money:s(0).COINS.startSum};e.default=function(t=o,e){switch(e.type){case a.UPDATE_SCORE:return Object.assign({},t,{cactuses:t.cactuses+e.diff});case a.UPDATE_MONEY:const s=t.money+e.amount;return Object.assign({},t,{money:s<0?0:s});case a.ADD_CACTUS:return Object.assign({},t,{cactuses:t.cactuses+1});case a.THROW_CACTUS:return Object.assign({},t,{cactuses:t.cactuses-1});default:return t}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(2),a={collided:[]};e.default=function(t=a,e){switch(e.type){case i.COLLIDE_OFFICIAL:return Object.assign({},t,{collided:(t.collided.push(e.id),t.collided)});default:return t}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(2),a={collided:[]};e.default=function(t=a,e){switch(e.type){case i.COLLIDE_PASSER:return Object.assign({},t,{collided:(t.collided.push(e.id),t.collided)});default:return t}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(2),a={renderCrowd:!1};e.default=function(t=a,e){switch(e.type){case i.RENDER_CROWD:return Object.assign({},t,{renderCrowd:!0});default:return t}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(2),a={status:""};e.default=function(t=a,e){switch(e.type){case i.GAME_OVER:return Object.assign({},t,{status:"fail",msg:e.msg});case i.HAPPY_END:return Object.assign({},t,{status:"end"});default:return t}}},function(t,e,s){"use strict";var i=this&&this.__decorate||function(t,e,s,i){var a,o=arguments.length,n=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,s,i);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(n=(o<3?a(n):o>3?a(e,s,n):a(e,s))||n);return o>3&&n&&Object.defineProperty(e,s,n),n},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=a(s(56)),n=a(s(6)),r=a(s(7)),h=a(s(1)),d=s(0),c=s(3),l=s(10),u=2;class p extends r.default{constructor({game:t}){super({game:t,x:0,y:t.world.height-d.ground.height,key:"person"}),this.isTouchedEnemy=!1,this.cactuses=[],this.isJumping=!1,this.facing="right",this.direction=1,this.countJumps=0,this.initiateKeyboardEvents=(()=>{this.keys={up:this.game.input.keyboard.addKey(Phaser.Keyboard.UP),down:this.game.input.keyboard.addKey(Phaser.Keyboard.DOWN),left:this.game.input.keyboard.addKey(Phaser.Keyboard.LEFT),right:this.game.input.keyboard.addKey(Phaser.Keyboard.RIGHT),a:this.game.input.keyboard.addKey(Phaser.Keyboard.A),d:this.game.input.keyboard.addKey(Phaser.Keyboard.D)}}),this.renderCrowd=o.default(()=>{h.default.dispatch(c.renderCrowd())}),this.collideFinalPoints=o.default(()=>{h.default.dispatch(c.gameEnd()),this.game.state.start("Finish")}),this.game=t,this.time=Date.now(),this.sprite.width=d.PERSON.width,this.sprite.height=d.PERSON.height,this.sprite.anchor.set(.5,1),this.sprite.body.setSize(d.PERSON.width,d.PERSON.height,20,17),this.animationsRunRight=this.sprite.animations.add("run",d.PERSON.tweenSettings.run.frames,d.PERSON.tweenSettings.run.frameRate,!0),this.animationsJump=this.sprite.animations.add("jump",d.PERSON.tweenSettings.jump.frames,d.PERSON.tweenSettings.jump.frameRate,!0),this.animationsStand=this.sprite.animations.add("stand",d.PERSON.tweenSettings.stand.frames,d.PERSON.tweenSettings.stand.frameRate,!0),this.game.physics.arcade.enable(this.sprite),this.sprite.body.gravity.y=3e3,this.sprite.animations.play("stand"),this.sprite.body.collideWorldBounds=!0,this.game.camera.follow(this.sprite),this.initiateKeyboardEvents()}render(){}collideWithEnemy(t){const e=h.default.getState();switch(t.type){case"fsb":this.isTouchedEnemy||(e.dispatch(c.changeMoney(-10)),this.addDisabledAnimation());break;case"gangster":case"official":e.dispatch(c.changeMoney(-10)),this.deactivateForTime();break;case"policeman":if(!this.isTouchedEnemy){this.addDisabledAnimation(),this.reduceMood("policeman"),h.default.dispatch(c.changeMood({incr:-d.MOOD.step}));break}}}deactivateForTime(){this.timer=this.game.time.events.loop(2e3,this.activate,this)}addDisabledAnimation(){this.isTouchedEnemy=!0,this.tween=this.game.add.tween(this.sprite).to({alpha:0},300,Phaser.Easing.Linear.None,!0,0,100,!1),this.timer=this.game.time.events.loop(d.DEACTIVATE_TIME_FOR_COLLIDE_PERSON_POLICEMAN,this.finishCollision,this),this.animationsStand.play(),this.sprite.body.velocity.x=-1*Math.abs(this.sprite.body.velocity.x)}update(){let t=this.keys,e=this.sprite,s=this.keys.up;if(this.sprite.position.x>=d.ground.width/2&&this.renderCrowd(),!this.isTouchedEnemy){e.body.velocity.x=0,t.left.isDown?(this.direction=-1,e.body.velocity.x=-d.PERSON.velocityX,("left"!=this.facing||e.body.touching.down||e.body.onFloor())&&(this.sprite.scale.setTo(-Math.abs(this.sprite.scale.x),this.sprite.scale.y),e.animations.play("run"),this.facing="left")):t.right.isDown?(e.body.velocity.x=d.PERSON.velocityX,this.direction=1,("right"!=this.facing||e.body.touching.down||e.body.onFloor())&&(this.sprite.scale.setTo(Math.abs(this.sprite.scale.x),this.sprite.scale.y),e.animations.play("run"),this.facing="right")):"idle"!=this.facing?(e.animations.stop(),e.frame=0,this.facing="idle"):(e.body.touching.down||e.body.onFloor())&&(e.frame=0,this.facing="idle",this.countJumps=0),s.isDown&&(this.countJumps++,(this.countJumps<u||!this.isJumping)&&(e.animations.play("jump"),e.body.velocity.y=e.body.velocity.y-d.PERSON.velocityY,this.isJumping=!0)),h.default.getState().score.cactuses>0&&this.keys.a.justDown&&this.throwCactus()}}finishCollision(){this.endAnimation(),this.activate()}endAnimation(){this.sprite.alpha=1,this.tween.stop()}activate(){this.game.time.events.remove(this.timer),this.isTouchedEnemy=!1}throwCactus(){h.default.dispatch(c.throwCactus()),l.PubSub.publish({x:this.sprite.position.x,y:this.sprite.worldPosition.y-this.sprite.body.height,velocityX:this.direction*d.PERSON.velocityX,angularVelocity:100})}reduceMood(t){h.default.dispatch(c.reduceMood({cause:t}))}endJumping(){this.isJumping=!1}}i([n.default],p.prototype,"collideWithEnemy",null),i([n.default],p.prototype,"reduceMood",null),e.default=p},,function(t,e,s){"use strict";var i=this&&this.__decorate||function(t,e,s,i){var a,o=arguments.length,n=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,s,i);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(n=(o<3?a(n):o>3?a(e,s,n):a(e,s))||n);return o>3&&n&&Object.defineProperty(e,s,n),n},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=a(s(6)),n=a(s(58)),r=a(s(59)),h=a(s(1));class d{constructor({game:t}){this.game=t,this.group=this.game.add.group(),this.group.fixedToCamera=!0,this.group.x=0,this.group.y=0,this.mood=new r.default({game:t}),this.coins=new n.default({game:t}),this.group.add(this.coins.group);let e=this.game.add.group(),s=this.game.add.sprite(20,85,"cactus");s.width=30,s.height=30,this.cactusesText=this.game.add.text(55,85,"0",{font:"25px Arial",fill:"#fff"}),e.add(s),e.add(this.cactusesText),this.group.add(e),h.default.subscribe(this.updateScore)}updateScore(){const t=h.default.getState(),{score:{cactuses:e}}=t;this.cactuses!==e&&(this.cactuses=e,this.cactusesText.setText(e.toString()))}kill(){this.group.killAll()}}i([o.default],d.prototype,"updateScore",null),e.default=d},function(t,e,s){"use strict";var i=this&&this.__decorate||function(t,e,s,i){var a,o=arguments.length,n=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,s,i);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(n=(o<3?a(n):o>3?a(e,s,n):a(e,s))||n);return o>3&&n&&Object.defineProperty(e,s,n),n},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=a(s(6)),n=s(0),r=a(s(1)),h=s(3);class d{constructor({game:t}){this.money=0,this.game=t,this.group=this.game.add.group(),this.group.x=20,this.group.y=50,this.coinImage=this.game.add.sprite(0,0,"coin"),this.coinImage.width=30,this.coinImage.height=30,this.label=this.game.add.text(35,0,String(n.COINS.startSum),{font:"25px Arial",fill:"#ffffff",align:"center"}),this.group.add(this.coinImage),this.group.add(this.label),r.default.subscribe(this.update)}update(){const t=r.default.getState(),{money:e}=t.score;e!==this.money&&(this.money=e,this.label.setText(this.money.toString()),0===e&&(r.default.dispatch(h.gameOver({msg:n.FAIL_MSG.money})),this.game.state.start("Finish")))}}i([o.default],d.prototype,"update",null),e.default=d},function(t,e,s){"use strict";var i=this&&this.__decorate||function(t,e,s,i){var a,o=arguments.length,n=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,s,i);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(n=(o<3?a(n):o>3?a(e,s,n):a(e,s))||n);return o>3&&n&&Object.defineProperty(e,s,n),n},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=a(s(6)),n=a(s(60)),r=a(s(1)),h=s(3),d=s(0),c={10:"#FF0000",20:"#FF4000",30:"#DF7401",40:"#DBA901",50:"#D7DF01",60:"#A5DF00",70:"#74DF00",80:"#3ADF00",90:"#01DF01",100:"#01DF3A"},l=30;class u{constructor({game:t}){this.moodValue=100,this.game=t,this.mood=new n.default(this.game,{width:200,height:30,x:120,y:30,bg:{color:"#651828"},bar:{color:"#10ff80"},animationDuration:200,flipped:!1,isFixedToCamera:!0}),r.default.subscribe(this.changeMood),this.barSpriteTween=this.game.add.tween(this.mood.barSprite).to({alpha:.5},300,Phaser.Easing.Linear.None,!1,0,-1,!1)}changeMood(){const t=r.default.getState().mood.total;if(this.total!==t){this.total=t,this.mood.setPercent(this.total),0===this.total&&(r.default.dispatch(h.gameOver({msg:d.FAIL_MSG.mood})),this.game.state.start("Finish"));const e=Object.keys(c).filter(t=>!Number.isNaN(+t)).map(t=>+t).reverse().find(t=>t<=this.total);e&&(this.mood.setBarColor(c[`${e}`]),e<=l?this.barSpriteTween.start():this.barSpriteTween.stop())}}}i([o.default],u.prototype,"changeMood",null),e.default=u},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e){this.game=t,this.setupConfiguration(e),this.setPosition(this.config.x,this.config.y),this.drawBackground(),this.drawHealthBar(),this.setFixedToCamera(this.config.isFixedToCamera)};i.prototype.constructor=i,i.prototype.setupConfiguration=function(t){this.config=this.mergeWithDefaultConfiguration(t),this.flipped=this.config.flipped},i.prototype.mergeWithDefaultConfiguration=function(t){return function t(e,s){for(var i in s)try{e[i]=s[i].constructor==Object?t(e[i],s[i]):s[i]}catch(t){e[i]=s[i]}return e}({width:250,height:40,x:0,y:0,bg:{color:"#651828"},bar:{color:"#FEFF03"},animationDuration:200,flipped:!1,isFixedToCamera:!1},t)},i.prototype.drawBackground=function(){var t=this.game.add.bitmapData(this.config.width,this.config.height);t.ctx.fillStyle=this.config.bg.color,t.ctx.beginPath(),t.ctx.rect(0,0,this.config.width,this.config.height),t.ctx.fill(),t.update(),this.bgSprite=this.game.add.sprite(this.x,this.y,t),this.bgSprite.anchor.set(.5)},i.prototype.drawHealthBar=function(){var t=this.game.add.bitmapData(this.config.width,this.config.height);t.ctx.fillStyle=this.config.bar.color,t.ctx.beginPath(),t.ctx.rect(0,0,this.config.width,this.config.height),t.ctx.fill(),t.update(),this.barSprite=this.game.add.sprite(this.x-this.bgSprite.width/2,this.y,t),this.barSprite.anchor.y=.5,this.flipped&&(this.barSprite.anchor.x=1,this.barSprite.position.x=this.bgSprite.position.x+this.config.width*this.bgSprite.anchor.x)},i.prototype.setPosition=function(t,e){this.x=t,this.y=e,void 0!==this.bgSprite&&void 0!==this.barSprite&&(this.bgSprite.position.x=t,this.bgSprite.position.y=e,this.barSprite.position.x=this.bgSprite.position.x-this.config.width*this.bgSprite.anchor.x,this.barSprite.position.y=e,this.flipped&&(this.barSprite.position.x=this.bgSprite.position.x))},i.prototype.setPercent=function(t){t<0&&(t=0),t>100&&(t=100);var e=t*this.config.width/100;this.setWidth(e)},i.prototype.setBarColor=function(t){var e=this.barSprite.key;e.update();var s=e.getPixelRGB(0,0),i=function(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,e,s,i){return e+e+s+s+i+i});var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}(t);e.replaceRGB(s.r,s.g,s.b,255,i.r,i.g,i.b,255)},i.prototype.setWidth=function(t){this.game.add.tween(this.barSprite).to({width:t},this.config.animationDuration,Phaser.Easing.Linear.None,!0)},i.prototype.setFixedToCamera=function(t){this.bgSprite.fixedToCamera=t,this.barSprite.fixedToCamera=t},i.prototype.setAnchor=function(t,e){this.bgSprite.anchor.set(t,e),this.barSprite.position.x=this.bgSprite.position.x-this.config.width*this.bgSprite.anchor.x,this.barSprite.anchor.y=e,this.flipped&&(this.barSprite.anchor.x=1,this.barSprite.position.x=this.bgSprite.position.x)},i.prototype.kill=function(){this.bgSprite.kill(),this.barSprite.kill()},e.default=i},function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s(11));i(s(1)),s(3);e.POLICEMAN={width:100,height:70,rangeX:[2e3,5e3],count:7,speed_min:1,speed_max:40,time_threshold:3e3,time_disabled:3e3},e.POLICEMAN_SPRITE_INFO={setTo:[.12,.12],stand:{frames:[0],frameRate:1},move:{frames:[7,6,5,4,3,2,1,0],frameRate:8}};class o extends a.default{constructor(t){super({game:t,coord:{x:t.rnd.between(e.POLICEMAN.rangeX[0],e.POLICEMAN.rangeX[1])},speed:{min:e.POLICEMAN.speed_min,max:e.POLICEMAN.speed_max},key:"policeman",spriteOptions:e.POLICEMAN_SPRITE_INFO,type:"policeman",time_threshold:e.POLICEMAN.time_threshold,time_disabled:e.POLICEMAN.time_disabled}),this.dir=Math.round(Math.random())?1:-1,this.game=t}}e.Policeman=o,e.PolicemanManager=(t=>{t.add.physicsGroup(Phaser.Physics.ARCADE);const s={};for(let i=0;i<e.POLICEMAN.count;i++){let e=new o(t);s[e.playerId]=e}return{getAllSprites:function(){return Object.values(s).map(t=>t.sprite)},getAllActivePoliceman:function(){return Object.values(s).filter(t=>!t.isTouchedByCactus).map(t=>t.sprite)},update:function(){Object.values(s).forEach(t=>{t.update()})},getPolicemanPlayerId:function(t){return Object.keys(s).find(e=>s[e].sprite===t)},collidePerson:function(t){const e=this.getPolicemanPlayerId(t);s[e].collideWithPerson()},collideCactus:function(t){const e=this.getPolicemanPlayerId(t);s[e].onCactusCollision()},collideWithObstacles:function(t){const e=this.getPolicemanPlayerId(t);s[e].collideWithObstacles()}}})},function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=s(0),o=i(s(7));e.default=class extends o.default{constructor(t){super({game:t.game,x:t.x,y:t.game.world.height-a.ground.height,key:t.key}),this.dir=Math.round(Math.random())?1:-1,this.game=t.game,this.props=Object.assign({},t),this.sprite.body.collideWorldBounds=!0,this.velocity=this.game.rnd.between(t.speed.min,t.speed.max),this.sprite.body.gravity.y=300,this.timerChangingVelocity=Date.now()}update(){Date.now()-this.timerChangingVelocity>this.props.time_threshold&&(this.sprite.body.moves=!0,this.timerChangingVelocity=Date.now(),this.dir=Math.round(Math.random())?1:-1,this.velocity=this.game.rnd.between(this.props.speed.min,this.props.speed.max)),this.sprite.scale.setTo(-this.dir*Math.abs(this.sprite.scale.x),this.sprite.scale.y),this.sprite.body.velocity.x=this.velocity*this.dir,this.sprite.body.x<=0&&this.dir<0||this.sprite.body.x>=this.game.world.width&&this.dir>0?(this.sprite.body.x<=0?this.sprite.body.x=0:this.sprite.body.x=this.game.world.width,this.sprite.body.velocity.x=0,this.dir*=-1,this.sprite.animations.stop("move",!0)):"move"===this.sprite.animations.currentAnim.name&&this.sprite.animations.currentAnim.isPlaying||this.sprite.animations.play("move",this.velocity<15?this.props.velocity.min:this.props.velocity.max)}collideWithObstacles(){this.sprite.body.velocity.x=0}}},function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s(1)),o=s(3),n=s(4),r=s(10),h=s(0);e.CACTUS={width:25,height:30};const d=[{x:100,y:200},{x:200,y:100},{x:300,y:100},{x:400,y:100},{x:500,y:100},{x:700,y:100},{x:1010,y:100},{x:1010,y:230},{x:1300,y:170},{x:2190,y:170},{x:2330,y:170},{x:2463,y:170},{x:2595,y:170}];class c{constructor({game:t,x:s,y:i,key:a="cactus"}){this.cactus=t.add.sprite(s,i,a),t.physics.arcade.enable(this.cactus),this.cactus.width=e.CACTUS.width,this.cactus.height=e.CACTUS.height,this.cactus.body.immovable=!0,this.cactus.body.allowGravity=!1,this.cactus.body.collideWorldBounds=!0,this.cactus.body.onWorldBounds=new Phaser.Signal,this.cactus.body.onWorldBounds.add(this.hitWorldBounds,this),this.cactus.anchor.set(.5,1)}hitWorldBounds(){this.cactus.destroy()}}e.Cactus=c,e.CactusHandler=(t=>{const e=t.add.physicsGroup(Phaser.Physics.ARCADE),s=[],i=[];(n.isDevelopment?d:n.sampleSize(d,Math.floor(Math.random()*d.length))).forEach(i=>{let a=new c({game:t,x:i.x,y:t.world.height-h.ground.height-i.y});s.push(a),e.add(a.cactus)});return r.PubSub.subscribe(e=>{const{x:s,y:a,velocityX:o,angularVelocity:n}=e;if(!i.length)return;const r=i[i.length-1];r.revive(),t.physics.arcade.enable(r),r.body.enable=!0,r.body.x=s,r.body.y=a,r.body.velocity.x=o,r.body.velocity.y=0,r.body.angularVelocity=n,r.body.allowGravity=!0,r.body.gravity.y=100}),{instances:s,thrownCactuses:i,cactuses:e,update:()=>{e.forEachAlive(e=>{t.debug.body(e)},this),e.forEach(t=>{!t.alive&&t.isKilled&&t.destroy()},this)},aliveCactuses:()=>e.getAll("isKilled",void 0),collideEnemyWithCactus:t=>{i.pop(),t.destroy(),t.isKilled=!0},collideObstaclesWithCactus:t=>{i.pop(),t.kill(),t.isKilled=!0},collidePersonWithCactus:t=>{t.kill(),i.push(t),a.default.dispatch(o.addCactus())}}})},function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s(65)),o=i(s(1)),n=s(0),r=s(3),h=i(s(7)),d=50,c=50,l=3e3;class u extends h.default{constructor({game:t,x:e,y:s}){super({game:t,x:e,y:t.world.height-s-10,key:"hands"}),this.game=t,this.sprite.width=n.HANDS.width,this.sprite.height=n.HANDS.height,this.sprite.alpha=0,this.sprite.body.immovable=!0,this.sprite.body.moves=!0,this.sprite.body.enable=!0,this.update=a.default(this.update,l),this.tween=this.game.add.tween(this.sprite).to(this.getTweenProps(!0),0,Phaser.Easing.Linear.None,!0,0,-1,!0),this.tween2=this.game.add.tween(this.sprite).to(this.getTweenProps(!1),0,Phaser.Easing.Linear.None,!0,0,-1,!0)}getTweenProps(t){return t?{alpha:1,y:this.sprite.y+20}:{alpha:0,y:this.sprite.y-20}}changeVisibility(t){t?(this.tween.resume(),this.tween2.pause()):(this.tween.pause(),this.tween2.resume())}update(){o.default.dispatch(r.changeMoney(-c))}}e.Hands=u;e.HandsHandler=class{constructor(t){this.handsX=n.HANDS_COORDS.map(t=>t[0]),this.hands=n.HANDS_COORDS.map(e=>new u({game:t,x:e[0],y:e[1]}))}getHandsSprite(){return this.hands.map(t=>t.sprite)}collidePerson(t){this.hands.find(e=>e.sprite===t).update()}update(t){const e=n.HANDS_COORDS.reduce((e,s,i)=>(Math.abs(this.hands[i].sprite.centerX-t)<d&&e.push(i),e),[]);this.hands.forEach((t,s)=>{const i=e.find(t=>t===s);void 0!==i&&i>=0?this.hands[s].changeVisibility(!0):this.hands[s].changeVisibility(!1)})}}},,function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0),a=[{x:900,y:70,w:200,h:30},{x:900,y:200,w:200,h:30},{x:1172,y:130,w:20,h:30},{x:1200,y:240,w:200,h:30},{x:3440,y:50,w:100,h:30},{x:3540,y:80,w:200,h:30},{x:3740,y:110,w:150,h:40},{x:3890,y:150,w:200,h:30},{x:4090,y:180,w:200,h:30}],o=[{key:i.obstaclesKeys.texture,w:300,h:40,x:1890,y:0},{key:i.obstaclesKeys.texture,w:150,h:10,x:2100,y:100},{key:i.obstaclesKeys.vasya,w:300,h:40,x:1374,y:0}];e.render=function(t){const e=this.game.add.physicsGroup(Phaser.Physics.ARCADE),s=function(t){let e=this.game.make.graphics();e.beginFill(9204338,1),e.drawRect(0,0,t.w,t.h),e.endFill(),e.boundsPadding=0;let s=this.game.add.sprite(t.x,this.game.world.height-i.ground.height-t.y-t.h);s.addChild(e),this.group.add(s),s.body.width=t.w,s.body.height=t.h,s.anchor.set(0,0),s.body.collideWorldBounds=!0,s.body.immovable=!0}.bind({game:this.game,group:e});return a.forEach(t=>{s(t)}),o.forEach(t=>{this.game.make.bitmapData(t.w,t.h).copy(t.key);const s=this.game.add.sprite(t.x,this.game.height-i.ground.height,t.key);s.anchor.set(0,1),e.add(s),t.key===i.obstaclesKeys.vasya&&s.scale.set(.24,.1),s.body.immovable=!0}),e}},function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s(1));s(13);const o=s(3),n=i(s(11)),r=[{x:600},{x:900},{x:2e3},{x:700},{x:950},{x:1e3}],h={min:10,max:30},d=2e3;e.OFFICIAL_SPRITE_INFO={setTo:[.09,.085],stand:{frames:[2],frameRate:8},move:{frames:[3,2,1,0],frameRate:8}};class c extends n.default{constructor(t,s,i,a){super({game:t,coord:{x:t.rnd.between(100,s.x)},speed:{min:i.min,max:i.max},key:a,spriteOptions:e.OFFICIAL_SPRITE_INFO,type:"official",time_threshold:d,time_disabled:d})}render(){}}e.Official=c,e.renderOfficials=(t=>{const e=r.map(e=>new c(t,e,h,"clerk"));return{sprites:e.map(t=>t.sprite),instances:e,update:()=>e.forEach(t=>t.update()),collisionWithPerson:t=>{const s=e.findIndex(e=>e.sprite===t);a.default.getState().official.collided.indexOf(s)<0&&(a.default.dispatch(o.collideOfficial(s)),a.default.dispatch(o.changeMoney(-5)))},collideWithObstacles:function(t){e.find(e=>e.sprite===t).collideWithObstacles()},collideCactus:function(t){e.find(e=>e.sprite===t).onCactusCollision()}}})},function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s(1)),o=s(0);s(69),s(70);e.default=class{constructor(){this.assetsPath="./assets/"}preload(){this.game.stage.backgroundColor="rgb(65, 75, 122)",this.game.load.spritesheet("mood",`${this.assetsPath}smiles.png`,203.2,204,5),this.game.load.image("coin",`${this.assetsPath}one-coin.png`),this.game.load.image("background",`${this.assetsPath}menu_bg.png`)}createCharacteristics(){const t=this.state.score.money,e=this.state.mood.total;let s,i="";e<40?(i="But, you mood is rather poor at this momemt. \nJust follow the next tips to boost your mind - try to meet more passers and touch them, they will inspire you. \nTry to avoid all communications with policemen because they make you feel sad in this case \nthrowing a cactus looks a good idea. Good luck!",s="bad"):e<80?(i="Cheer up when something goes wrong :) \nEvery day may not be good, but there’s something good in every day. \nYou will feel better when you escape meetings with policeman and officials.",s="good"):(i="You're a professional! Seems that you can overcome even more difficult missions.",s="excellent");let a="";return{moodTemplate:i,moneyTalk:a=t<o.COINS.startSum?`Good job! \nYou earned ${t}, but that's not so much to invest this money to some business or any good deals. \nThe thing is all clashes with police lead to irritation and mood reduction. \nSo, please, try to avoid routine communication with officials and any kinds of clerks.`:`How did you do that! Unbelievable! You saved ${t} RUR from Government waste. \nAnd that means you can invest it to the profitable business as an investment or in any good deals like building new schools ans kindegartens.`,moodLevel:s}}create(){this.game.world.setBounds(0,0,this.game.width,this.game.height),this.bg=this.game.add.tileSprite(0,0,5*this.game.world.width,5*this.game.world.height,"background"),this.bg.scale.set(.3,.3),this.bg.smoothed=!0,this.bg.alpha=.2,this.state=a.default.getState();const t=this.state.statusGame.status,e=this.state.statusGame.msg;let s="",i="";switch(t){case"fail":s="Game Over, Man!",i=`${e} \n You should try again, the most important thing is not to give up and \ndefeat the damned corrupt! Good luck!`;break;case"end":s="Congratulations!",i="That was hard but you did it!";break;default:return}const o=this.game.add.graphics();o.beginFill(0,.2),o.drawRect(0,100,this.game.width,100),this.heading=this.game.add.text(0,0,s,{fill:"#fff",align:"center",wordWrapWidth:.7*this.game.width,boundsAlignH:"center",boundsAlignV:"middle"}),this.heading.setShadow(3,3,"rgba(0,0,0,0.5)",2),this.heading.setTextBounds(0,100,this.game.width,100);const n=this.game.add.text(this.game.world.centerX,o.getBounds().y+o.getBounds().height+10,i,{font:"bold 25px Arial",fill:"#fff",align:"center",wordWrapWidth:.7*this.game.width});n.lineSpacing=5,n.strokeThickness=5,n.setShadow(2,2,"#333333",2,!0,!1),n.anchor.set(.5,0);const{y:r,height:h}=n.getBounds();let d=r+h;if("fail"!==t){const t=this.createCharacteristics(),e={mood:t.moodTemplate,coin:t.moneyTalk};for(let s in e){let i,a=this.game.add.group();if("mood"===s){switch(i=this.game.add.sprite(50,50,"mood"),t.moodLevel){case"bad":i.frame=4;case"good":i.frame=0;case"excellent":i.frame=2;default:i.frame=0}i.width=50,i.height=50}"coin"===s&&((i=this.game.add.sprite(50,50,"coin")).width=50,i.height=50);const o=this.game.add.text(0,0,`${e[s]}`,{font:"20px Arial",fill:"#fff",wordWrap:!0,wordWrapWidth:.6*this.game.width,align:"left"});o.x=110,i.centerY=o.centerY,a.add(i),a.add(o),d+=40,a.y=d,d+=o.height,a.centerX=this.game.world.centerX}}d+=50;const c=this.game.add.text(0,0,"Press Enter or click on button below",{font:"19px Arial",fill:"#fff",align:"center",wordWrapWidth:.7*this.game.width});c.centerX=this.game.world.centerX,c.y=d,this.backWrapper=this.game.add.graphics(),this.backWrapper.beginFill(14090240,.9),this.backWrapper.drawRect(this.game.world.centerX-150,d+50,300,100),this.back=this.game.add.text(0,0,"Start again!",{font:"28px Arial",fill:"#fff",align:"center",fontWeight:"bold",boundsAlignH:"center",boundsAlignV:"middle",wordWrap:!0,wordWrapWidth:200}),this.back.setTextBounds(this.game.world.centerX-150,d+50,300,100),this.back.setShadow(-3,3,"rgba(0,0,0,0.2)",0);const l=this.back.context.createLinearGradient(0,0,this.back.width,this.back.height);l.addColorStop(0,"#FFD1AA"),l.addColorStop(1,"#D49A6A"),this.back.fill=l,this.game.input.onDown.add(this.handleClickBack,this),this.enterKey=this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER)}render(){}handleClickBack(){if(this.backWrapper.getBounds().contains(this.game.input.x,this.game.input.y))return this.game.input.onDown.remove(this.handleClickBack,this),this.game.state.start("PreBoot",!0,!1),!0}update(){this.enterKey.isDown&&this.game.state.start("PreBoot",!0,!1)}}},function(t,e,s){t.exports=s.p+"assets/smiles.png"},function(t,e,s){t.exports=s.p+"assets/menu_bg.png"},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.rgResizeBody=function(t){const e=window.innerHeight;return document.body.clientHeight>e&&(document.body.style.height=e+"px",document.documentElement.style.height=e+"px"),[t.clientWidth,t.clientHeight]}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mainMenu=[{text:"Start Game",targetState:"Game"},{text:"Guide",targetState:"Help"}];const i={textStyle:{font:"24px Arial",fill:"#888"},textStyleFocused:{font:"30px Arial",fill:"#000",backgroundColor:"#888"}};e.MenuWrapper=function(){return new a("Menu:",e.mainMenu)};class a extends Phaser.State{constructor(t,e){super(),this.focused=0,this.heading=t,this.options=e}create(){this.focused=0,this.keyboard=this.game.input.keyboard,this.controls=this.keyboard.addKeys({up:Phaser.Keyboard.UP,down:Phaser.Keyboard.DOWN,left:Phaser.Keyboard.LEFT,right:Phaser.Keyboard.RIGHT,interact:Phaser.Keyboard.ENTER}),this.game.add.text(this.game.world.centerX,this.game.world.centerY-100,this.heading,i.textStyle).anchor.set(.5),this.menuItems=[];for(let t=0;t<this.options.length;t++){let e,s;e=this.options[t],s=new o(this.game,this.game.world.centerX,this.game.world.centerY+70*(t+1),e.text,e.targetState),this.menuItems.push(s)}this.menuItems[this.focused].focus(!0),this.controls.interact.onDown.add(this.activateFocusedItem,this),this.controls.up.onDown.add(this.selectItem,this,0,-1),this.controls.down.onDown.add(this.selectItem,this,0,1)}selectItem(t,e){this.menuItems[this.focused].focus(!1),this.focused+=e,this.focused>=this.menuItems.length?this.focused-=this.menuItems.length:this.focused<0&&(this.focused+=this.menuItems.length),this.menuItems[this.focused].focus(!0)}activateFocusedItem(){this.menuItems[this.focused].navigate()}}e.Menu=a;class o extends Phaser.Text{constructor(t,e,s,a,o,n=!1){super(t,e,s,a,i.textStyle),this.baseText=a,this.targetState=o,this.focused=n,this.game.world.addChild(this),this.anchor.set(.5)}focus(t){t?(this.focused=!0,this.setStyle(i.textStyleFocused)):(this.focused=!1,this.setStyle(i.textStyle))}navigate(){this.targetState&&this.game.state.start(this.targetState)}select(){this.text=this.baseText}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),s(74),s(75);e.default=class extends Phaser.State{constructor(){super(...arguments),this.assetsPath="./assets/"}preload(){this.game.stage.backgroundColor="#000",this.game.load.image("back",`${this.assetsPath}back-arrow.png`),this.game.load.image("helpMoveDesktop",`${this.assetsPath}helpMoveDesktop.png`)}create(){this.game.input.keyboard.addKey(Phaser.Keyboard.LEFT).onDown.add(this.handleClickBack,this);const t=[{image:this.game.make.sprite(0,0,"helpMoveDesktop"),text:"Up - jump, Left, Right - direction",options:{image:{width:250,height:70},text:{boundsAlignH:"center",boundsAlignV:"middle"}}},{image:this.game.make.sprite(0,0,"cactus"),text:'PRESS "A" to throw a cactus. This item used for protection player against cops',options:{image:{width:40,height:40},text:{boundsAlignH:"center",boundsAlignV:"middle"}}},{image:this.game.make.sprite(0,0,"coin"),text:"Money that you need to save as much as you can",options:{image:{width:40,height:40},text:{boundsAlignH:"center",boundsAlignV:"middle"}}},{image:this.game.make.sprite(0,0,"loading"),text:"Stay positive otherwise the system will kill you",options:{image:{width:70,height:30},text:{boundsAlignH:"center",boundsAlignV:"middle"}}}];this.button=this.game.add.button(100,this.game.height/15,"back",this.handleClickBack,this,2,1,0),this.back=this.game.add.text(140,this.game.height/15,"Back",{fill:"#fff",align:"center"});const e=this.game.add.group();let s=0;const i=this.game.height/15<20?20:this.game.height/15,a=Math.min(22,Math.round(this.game.height/19));t.forEach((t,o)=>{let n=this.game.add.group();const r=this.game.add.text(100,s,`${t.text}.`,Object.assign({font:`${a}px Arial`,fill:"#fff",wordWrap:!0,wordWrapWidth:this.game.width-200},t.options.text));n.height=100,this.game.add.existing(t.image),t.image.width=t.options.image.width,t.image.height=t.options.image.height,r.anchor.set(0,.5),r.y=n.centerY,r.position.x=t.image.width+50,t.image.anchor.set(0,.5),t.image.y=n.centerY,n.add(t.image),n.add(r),s+=r.height+i,n.y=s,e.add(n)}),e.width=700,e.x=this.game.world.centerX-.5*e.width,e.y=this.game.world.centerY-.5*e.height,this.game.input.onDown.add(this.handleClickBack,this)}handleClickBack(){this.state.start("Menu",!0,!1)}}},function(t,e,s){t.exports=s.p+"assets/back-arrow.png"},function(t,e,s){t.exports=s.p+"assets/helpMoveDesktop.png"}],[[16,1,2]]]);